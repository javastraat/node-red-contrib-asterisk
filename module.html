<script type="text/x-red" data-template-name="asterisk-controller">
  <div class="form-row">
    <label for="node-config-input-host"><i class="icon-bookmark"></i> AGI Host</label>
    <input type="text" id="node-config-input-host">
  </div>
  <div class="form-row">
    <label for="node-config-input-port"><i class="icon-bookmark"></i> AGI Port</label>
    <input type="text" id="node-config-input-port">
  </div>
</script>

<script type="text/x-red" data-template-name="asterisk-line-in">
  <div class="form-row">
    <label for="node-input-name"><i class="icon-tag"></i> Name</label>
    <input type="text" id="node-input-name" placeholder="Name">
  </div>
  <div class="form-row">
    <label for="node-input-code"><i class="icon-tag"></i> Code</label>
    <input type="text" id="node-input-code" placeholder="Name">
  </div>
  <div class="form-row">
    <label for="node-input-sound"><i class="icon-tag"></i> Sound</label>
    <input type="text" id="node-input-sound" placeholder="Name">
  </div>
  <div class="form-row">
    <label for="node-input-controller"><i class="icon-bookmark"></i> Controller</label>
    <input type="text" id="node-input-controller">
  </div>
</script>

<script type="text/x-red" data-help-name="asterisk-line-in">
    <p>
    AGI connection
    </p>
</script>

<script type="text/javascript">
  RED.nodes.registerType('asterisk-controller', {
    category: 'config',
    defaults: {
      host: {
        value: "0.0.0.0",
        required: false
      },
      port: {
        value: 14000,
        required: true,
        validate: RED.validators.number()
      }
    },
    label: function() {
      return "agi://" + this.host + ":" + this.port;
    }
  });
</script>


<script type="text/javascript">
  RED.nodes.registerType('asterisk-line-in', {
    category: 'input',
    color: '#F78B39',
    defaults: {
      name: {
        value: ""
      },
      code: {
        value: ""
      },
      sound: {
        value: ""
      },
      controller: {
        value: "",
        type: "asterisk-controller"
      }
    },
    inputs: 0,
    outputs: 1,
    icon: "bridge.png",
    label: function() {
      return (this.name||"asterisk");
    }
  });
</script>
